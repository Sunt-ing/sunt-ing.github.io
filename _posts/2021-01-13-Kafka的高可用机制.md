Kafka是天然的分布式消息队列，某一个partition都可以有多个副本。

Kafka在0.8版本之前没有高可用功能，所以任何一个节点挂了，都会导致部分partition的不可读且不可写。

Kafka在0.8版本之后实现了高可用机制，也即多副本机制。这样，一个topic会有好几个partition，每一个partition都有好几个replica（副本），同一个partition的replica中只有一个是leader replica，其他的都是follower replica。同一个partition的不同replica存放于不同的broker中。生产者只能写入leader replica，然后leader replica收到数据后写入follower replica。消费者也只能读取leader replica，而不能读取follower replica上的数据，这样就能避免一致性问题。

Kafka的高可用是用Zookeeper实现的，如果某一个broker挂了，那么Zookeeper就会查看这个broker生前担当了哪些partition的leader，然后由于每个partition都有多个replica，所以Zookeeper会重新选举这些partition的leader。

#### 可以配置的高可用参数



