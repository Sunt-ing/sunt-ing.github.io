* 目的                                                                                333
    * 估计出一个批处理任务的耗时，特别是当我们用云服务来跑我们的Spark 机器学习任务时
    * 当我们要购买云服务提供商的服务器实例来跑我们的任务时，如果能事先得知当前集群配置下我们的任务要跑多久，我们就可以对不同的资源配置进行比较，在耗时、费用上做出权衡，从而找到最适合我们的集群配置。
    * 比如，要花最少的钱在 deadline前跑完我们的任务，或者在所给budget下用最少的时间跑完我们的任务
* 关键词：performance estimate（prediction）
* 核心思想
    * 分析型大数据任务不但是data-intensive的，而且是computation-intensive的，所以我们可以通过分析一个任务的拓扑结构来预测其执行时间
    * Spark等高级分析框架（有别于只有两种operator的Map Reduce）的workflow DAG中，有一些常见的简单结构，比如：一对多、树状聚合、混洗等，它们的耗时对于数据量都是成线性或近似线性关系的，和集群中的机器数也成良好增长关系，否则算法会过于复杂无法在大数据上跑
    * 我们可以根据这些结构来建一个性能模型，然后在小集群上跑一个小的样例数据集，使用机器学习的方法来训练。步骤：
        * 决定收集什么data point来training
            * data point在这里指我们要测试什么配置
        * 决定要从training data point中得出什么feature
        * 进行feature selection来挑选出最适配数据的模型中最简单的那个
    * 模型训练完以后估计一下任务耗时
        * ![图片](https://uploader.shimo.im/f/z85T5AiPR8NfKQGY.png!thumbnail?fileGuid=XpTpkQwPYpWkKgW6)
* 公式
    * ![图片](https://uploader.shimo.im/f/sEgTy7g29NRoasrG.png!thumbnail?fileGuid=XpTpkQwPYpWkKgW6)
    * 366页说，当data随着机器增加而增加时（即每一台机器的data数量不变）
        * collect结构（all-to-one）耗时增长模式为：O（machines）
            * 因为序列化和反序列化耗时
        * binary 的aggregation tree则是 O（log（machine））
        * scale就是数据量：见367页
* 效果
    * 在耗费5%的原任务运行时长时，预测的误差不超过20%
* 最优实验设计
    * 论文的另一个亮点是其用到了最优实验设计，以找出其中最有价值的data point，以提高模型的训练效率，减少训练的耗时和成本
    * 步骤
        * 找出要跑的样例数据量和机器数的上限，比如scale<10%（即最多用10%的正式数据集来作为样例），machines<5，那么我们有5*10=50种feature vector
        * 将这些feature vector全部投入下图的协方差矩阵运算中
            * ![图片](https://uploader.shimo.im/f/8K2BVdwHKzjFJABj.png!thumbnail?fileGuid=XpTpkQwPYpWkKgW6)
                * 其中$$a_i$$表示feature vector，我们希望能找到合适的feature vector使得这个误差函数最小化
        * 选择跑λ值不为0的实验
        * 另外，我们要额外控制一下总成本
            * ![图片](https://uploader.shimo.im/f/Zq95ZpQSe5mKikmw.png!thumbnail?fileGuid=XpTpkQwPYpWkKgW6)
        * 其中，B 表示总成本Budget，m是机器数，$$c_i$$表是当我们的数据量为$$s_i$$、机器数为$$m_i$$表时我们的成本
            * * 模型失效检测和拓展
    * * 我注意的事
    * advanced analytics workload 和 SQL或stream processing 不同，它们对内存和CPU核数很关注
    * 是否要求一个集群中机器型号相同？
    * 我们在建模过程中的目标是获得尽可能少的特征，因为所需的训练数据量随着特征的数量线性增长。
